create database arrendamientos;
use arrendamientos;

create table users (
  id int auto_increment primary key not null,
  user varchar(100),
  password varchar(100)
);

INSERT INTO users (user, password) VALUES ('admin', '123');

CREATE TABLE datos_cli_prov (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100),
    ruc VARCHAR(11),
    direccion_propietario VARCHAR(100),
    celular INT(9),
    nacimiento DATE,
    dni_propietario VARCHAR(8),
    fecha_ingreso TIMESTAMP,
    correo VARCHAR(100),
    estado_civil VARCHAR(30),
    conyuge VARCHAR(100),
    dni_conyuge VARCHAR(8),
    ciudad VARCHAR(100)
);

create table piso (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  piso VARCHAR(100)
);

CREATE TABLE cuarto (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    piso_id INT,
    numcuarto VARCHAR(100),
    metraje VARCHAR(100),
    foto LONGBLOB,
    ocupado BOOLEAN DEFAULT false,
    FOREIGN KEY (piso_id) REFERENCES piso(id)
);

CREATE TABLE rent_calculation (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  client_id INT,
  FOREIGN KEY (client_id) REFERENCES datos_cli_prov(id) ON DELETE CASCADE,
  rent DECIMAL(10,2),
  garantia DECIMAL(10,2),
  total INT,
  total_rent DECIMAL(10,2),
  floor_id INT,
  room_id INT,
  interes DECIMAL(10,2),
  mensual DECIMAL(10,2),
  fecha DATE,
  fecha_ingreso DATE,
  tipo_pago VARCHAR(30),
  pago_diario DECIMAL(10,2),
  pago_sem DECIMAL(10,2),
  quincenal DECIMAL(10,2),
  FOREIGN KEY (floor_id) REFERENCES piso(id),
  FOREIGN KEY (room_id) REFERENCES cuarto(id)
);

CREATE TABLE importe_mensual (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  rent_calculation_id INT,
  FOREIGN KEY (rent_calculation_id) REFERENCES rent_calculation(id) ON DELETE CASCADE,
  ord INT,
  fecha DATE,
  saldo DECIMAL(10,2),
  capital DECIMAL(10,2),
  interes DECIMAL(10,2),
  por_pagar DECIMAL(10,2),
  sum_capital DECIMAL(10,2),
  sum_interes DECIMAL(10,2),
  sum_porPagar DECIMAL(10,2)
);

CREATE TABLE importe_variado (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  rent_calculation_id INT,
  FOREIGN KEY (rent_calculation_id) REFERENCES rent_calculation(id) ON DELETE CASCADE,
  ord INT,
  fecha DATE,
  importe DECIMAL(10,2),
  sum_importe DECIMAL(10,2)
);
